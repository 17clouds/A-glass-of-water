window,BX.namespace("BX.Currency"),BX.Currency.defaultFormat||BX.mergeEx(BX.Currency,{currencyList:[],defaultFormat:{FORMAT_STRING:"#",DEC_POINT:".",THOUSANDS_SEP:" ",DECIMALS:2,HIDE_ZERO:"N"},setCurrencyFormat:function(r,e,t){var n,c=this.getCurrencyIndex(r),i=BX.clone(this.defaultFormat,!0);if(t=!!t,!(c>-1)||t){for(n in-1===c&&(c=this.currencyList.length),i)i.hasOwnProperty(n)&&void 0!==e[n]&&(i[n]=e[n]);this.currencyList[c]={currency:r,format:BX.clone(i,!0)}}},setCurrencies:function(r,e){var t;if(r&&BX.type.isArray(r))for(t=0;t<r.length;t++)r[t].CURRENCY&&r[t].FORMAT&&this.setCurrencyFormat(r[t].CURRENCY,r[t].FORMAT,e)},getCurrencyFormat:function(r){var e=this.getCurrencyIndex(r);return e>-1&&this.currencyList[e].format},getCurrencyIndex:function(r){var e,t=-1;if(0===this.currencyList.length)return t;for(e=0;e<this.currencyList.length;e++)if(this.currencyList[e].currency===r){t=e;break}return t},clearCurrency:function(r){var e=this.getCurrencyIndex(r);e>-1&&(this.currencyList=BX.util.deleteFromArray(this.currencyList,e))},clean:function(){this.currencyList=[]},currencyFormat:function(r,e,t){var n,c="";return t=!!t,(n=this.getCurrencyFormat(e))&&"object"==typeof n&&(n.CURRENT_DECIMALS=n.DECIMALS,"Y"===n.HIDE_ZERO&&r==parseInt(r,10)&&(n.CURRENT_DECIMALS=0),c=BX.util.number_format(r,n.CURRENT_DECIMALS,n.DEC_POINT,n.THOUSANDS_SEP),t&&(c=n.FORMAT_STRING.replace(/(^|[^&])#/,"$1"+c))),c}});